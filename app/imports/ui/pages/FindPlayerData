<div align="center">
  <label>Player Id:
    <input [(ngModel)]="playerId" placeholder="Player Id">
    <button (click)="getPlayerData()">Get Player Data</button>
  </label>
</div>


<!-- <mat-progress-bar mode="determinate" value="40"></mat-progress-bar>
<button mat-button>Click me!</button>
<mat-checkbox>Check me!</mat-checkbox>
-->
<div *ngIf="playerResult">
  <h2 align="center"> {{playerResult.profile.personaname}}'s Details</h2>
  <h3 align="center"> API ID: {{playerResult.profile.account_id}} </h3>
  <div align="center">
    <img src="{{playerResult.profile.avatarfull}}">
  </div>
  <h3> Player Details: </h3>
  <div *ngIf="playerResult.solo_competitive_rank">
    <p>Solo MMR: {{playerResult.solo_competitive_rank}} </p>
  </div>
  <div *ngIf="playerResult.competitive_rank">
    <p>Competitive MMR: {{playerResult.competitive_rank}} </p>
  </div>

  <p>Estimated MMR: {{playerResult.mmr_estimate.estimate}} </p>
  <p>Region: {{playerResult.profile.loccountrycode}} </p>
  <p>Steam account: <a href="{{playerResult.profile.profileurl}} ">{{playerResult.profile.profileurl}}</a></p>
  <div *ngIf="playerResult.profile.last_login">
    <p>Last Login: {{playerResult.profile.last_login}}</p>
  </div>
</div>

<div *ngIf="playerMatches" align = "center">
  <h3 align="center"> Player Recent Matches </h3>
  <div *ngFor="let matches of playerMatches">
    <ul align = center  class=links routerLink="/match-details/{{matches.match_id}}">
      <li> Match ID: {{matches.match_id}} </li>
    </ul>
    <ul class=info  align = "left">
      <li>Hero ID: {{matches.hero_id}} </li>
      <li>K|D|A: {{matches.kills}}|{{matches.deaths}}|{{matches.assists}} </li>
      <li>Last hits: {{matches.last_hits}} </li>
      <li>Hero Damage|Hero Healing: {{matches.hero_damage}}|{{matches.hero_healing}}</li>
      <li>Tower Damage:{{matches.tower_damage}} </li>
      <li>GPM|XPM: {{matches.gold_per_min}}|{{matches.xp_per_min}} </li>
    </ul>
  </div>

  <!--
    <p>
      <button (click)="getDataFromLambda()">Get Lambda Data </button>
      <label *ngIf="lambdaDataReceived"> Recieved: {{lambdaDataReceived.message}} </label>
    </p>
  -->
  <p align="center">
    <img src="{{lambdaDataSent.output}}" *ngIf="lambdaDataSent">
  </p>
  <h3 align="center">
    <label>L33T?</label>
  </h3>
  <div align="center">
    <input [(ngModel)]="postInput">
    <button (click)="postDataToLambda()">Post Lambda Data </button>
  </div>
</div>

getPlayerData() {
    this.location.go("/player-details/"+this.playerId);
    this.http.get("https://api.opendota.com/api/players/" + this.playerId).subscribe((result) => {
      this.playerResult = result;
      console.log(this.playerResult)
    });
    this.http.get("https://api.opendota.com/api/players/" + this.playerId + "/recentMatches").subscribe((pMatches) => {
      this.playerMatches = pMatches;
      console.log(this.playerMatches)
    });
  }